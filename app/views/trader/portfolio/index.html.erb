
<h1 class = 'text-gray-700 text-4xl font-bold mt-10'>
  Portfolio
</h1>
<div class = 'grid grid-cols-[1fr,2fr] gap-10 my-6'>
  <div class = 'p-10 flex items-center justify-center'>
    <ul>
      <li class =' text-2xl font-bold text-gray-500 mb-2 '>
          Cash Balance
      </li>
      <li  class = 'text-center text-3xl font-bold text-sky-700  mb-4'>
          <%= current_user.balance %>
      </li>
      <li class =' text-2xl font-bold text-gray-500 mb-2 '>
          Porfolio Value
      </li>
      <li class = 'text-center text-3xl font-bold text-sky-700  mb-4'>
        <%= number_to_currency(@total_portfolio, unit: '$') %>
      </li>
      <li class =' text-2xl font-bold text-gray-500 mb-2 '>
          Portfolio Profit & Loss
      </li>
      <li  class = 'text-center text-3xl font-bold text-red-700 mb-4 '>
          X
      </li>
    </ul>
  </div>
  <%= pie_chart @pie_chart_data, height: '400px', library: { pieSliceText: 'value' } %>
</div>



<ul class = 'grid grid-cols-[0.75fr,0.75fr,1.5fr,0.75fr,0.75fr,1.25fr] text-lg font-bold  mt-4 mb-2 pb-2 border-b-[2px] border-b-gray-600'>
<li>Symbol</li>
<li>Stock Shares</li>
<li>Company</li>
<li> Price</li>
<li> Total Value</li>
</ul>
<% @stocks.each do |stock|%>
  <ul class = 'grid  grid-cols-[0.75fr,0.75fr,1.5fr,0.75fr,0.75fr,1.25fr]  text-center text-md mb-2 pb-2 border-b-[1px] border-b-gray-200' >
    <li class = 'flex items-center  gap-2 '>
    <%= image_tag(stock.logo, alt: 'Logo',class: 'w-6 h-6  object-fit') %> <%= stock.symbol %>
    </li>
    <li class = 'flex items-center  gap-2 '>
    <%= stock.shares%>
    </li>
    <li class = 'flex items-center  gap-2 '>
    <%= stock.company_name%>
    </li>
    <li class = 'flex items-center  gap-2 '>
    <%= number_to_currency(stock.latest_price, unit: '$') %>
    </li>
    <li class = 'flex items-center  gap-2 '>
    <%= number_to_currency(stock.latest_price  * stock.shares, unit: '$') %>
    </li>
    <li class = 'flex gap-2 items-center justify-center'>
    <%= link_to 'Buy', new_trader_transaction_path(transaction: { stock_symbol:stock[:symbol], stock_price: stock[:latest_price], transaction_type: :buy }) ,class: 'text-sm px-5 py-2 bg-green-600 text-white rounded-md '%>
    <%= link_to 'Sell', new_trader_transaction_path(transaction: { stock_symbol: stock[:symbol], stock_price: stock[:latest_price], transaction_type: :sell }), class: "text-sm px-5 py-2 bg-red-600 text-white  rounded-md" %>

    </li>
  </ul>

<%end%>
