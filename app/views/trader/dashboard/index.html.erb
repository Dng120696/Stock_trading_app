<nav class = 'flex items-center justify-between w-[clamp(30rem,90%,120rem)] mx-auto py-6'>
  <ul class = 'flex gap-10  '>
    <li>
      <%= link_to 'Dashboard', trader_dashboard_index_path %>
    </li>
    <li>
    <%= link_to 'Portfolio', trader_portfolio_index_path %>
    </li>
    <li>
    <%= link_to 'Transaction', trader_transactions_path %>
    </li>
  </ul>
  <%= button_to 'Logout', destroy_user_session_path, method: :delete %>
</nav>




<h1>hello <%= current_user.firstname%> </h1>
<p>Your Balance: <%= number_to_currency(current_user.balance, unit: 'â‚±') %></p>
<div>
<h2>Explore Stocks</h2>

<%= form_tag trader_dashboard_index_path, method: :get do %>
<div class="search-bar">
<%= text_field_tag :search, params[:search], placeholder: 'Enter stock symbol...' %>
<%= submit_tag 'Search', class: '' %>
</div>
<% end %>


<ul class = 'grid grid-cols-6 text-2xl font-bold text-center mb-2'>
  <li>Symbol</li>
  <li>Company Name</li>
  <li> Price</li>
  <li> Change</li>
  <li> High Price</li>
  <li> Low Price</li>
</ul>
<% if @stock %>
  <div class = 'grid grid-cols-6 text-center'>
    <p><%= @stock.symbol %></p>
    <p><%= @stock.company_name %></p>
    <p><%= @stock.latest_price %></p>
    <p><%= @stock.change %></p>
    <p><%= @stock.week_52_high%></p>
    <p><%= @stock.week_52_low %></p>>
    <%= link_to 'Buy', new_trader_transaction_path(transaction: { stock_symbol: @stock.symbol, stock_price: @stock.latest_price, transaction_type: :buy }) %>

    <%= link_to 'Sell', new_trader_transaction_path(transaction: { stock_symbol: @stock.symbol, stock_price: @stock.latest_price, transaction_type: :sell }), class: "#{Stock.exists?(symbol: @stock.symbol) ? '' : 'cursor-not-allowed text-color-[#999] pointer-events-none' }" %>

    </div>
<%else%>
    <p class = 'text-center text-gray-400'> No Records Found</p>
<% end %>

<div class = 'border-t-[1px] mt-4'>
<h1 class = 'text-3xl font-bold'>Top 10 List of Stocks</h1>
<% @top_stocks.each do |stock| %>
  <div class = 'grid grid-cols-6 text-center'>
    <p> <%= stock.symbol%></p>
    <p> <%= stock.company_name%></p>
    <p> <%= stock.latest_price%></p>
    <p> <%= stock.change%></p>
    <p><%= stock.week_52_high%></p>
    <p><%= stock.week_52_low %></p>
    <%= link_to 'Buy', new_trader_transaction_path(transaction: { stock_symbol: stock.symbol, stock_price: stock.latest_price, transaction_type: :buy })%>
    <%= link_to 'Sell', new_trader_transaction_path(transaction: { stock_symbol: stock.symbol, stock_price: stock.latest_price, transaction_type: :sell }), class: "#{ current_user.stocks.exists?(symbol: stock.symbol) ? '' : 'cursor-not-allowed text-color-[#999] pointer-events-none' }" %>
</div>
</div>
<%end%>
